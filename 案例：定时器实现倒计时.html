<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>定时器实现倒计时</title>
    <style>
      div {
        display: inline-block;
        width: 100px;
        height: 100px;
        background-color: black;
        color: #eee;
        font-size: 18px;
        text-align: center;
        line-height: 100px;
        margin: 200px auto;
      }
    </style>
  </head>
  <body>
    <!--1. 这个倒计时是不断变化的，因此需要定时器来自动变化
        2. 三个盒子里面分别存放时分秒
        3. 三个盒子利用innerHTML放入计算的小时分钟秒数
        4. 第一次执行也是间隔毫秒数，因此刚刷新时会有空白
        5. 最好采用封装函数的方式，这样可以先调用一次这个函数，防止刚开始刷新页面时有空白问题 -->
    <div class="hour">1</div>
    <div class="minute">2</div>
    <div class="second">3</div>
    <script>
      //1.获取元素
      var hour = document.querySelector(".hour");
      var minute = document.querySelector(".minute");
      var second = document.querySelector(".second");
      var inputTime = +new Date("2020-10-5 12:00:00"); //返回的是用户输入时间的总毫秒数
      countDown(); //先调用一次这个函数，防止刚开始刷新页面时有空白问题
      //用定时器调用函数
      setInterval(countDown, 1000);
      //倒计时函数 计算时分秒
      function countDown() {
        var nowTime = +new Date(); //返回当前时间总的毫秒数
        var times = (inputTime - nowTime) / 1000; //times 是剩余时间总的毫秒数
        var h = parseInt((times / 60 / 60) % 24); //时
        h = h >= 10 ? h : "0" + h;
        hour.innerHTML = h; //把剩余的小时给黑色的小盒子
        var m = parseInt((times / 60) % 60); //分
        m = m >= 10 ? m : "0" + m;
        minute.innerHTML = m; //把剩余的分钟给黑色的小盒子
        var s = parseInt(times % 60); //秒
        s = s >= 10 ? s : "0" + s;
        second.innerHTML = s; //把剩余的秒数给黑色的小盒子
      }
    </script>
  </body>
</html>
